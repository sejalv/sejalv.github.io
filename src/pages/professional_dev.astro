---
// pages/professional.astro

import MainLayout from '../layouts/MainLayout.astro';

// Define your career history
const careerHistory = [
  {
    id: "company-8",
    company: "Bling",
    period: "2024 - 2024",
    location: "Berlin, Germany",
    title: "Data Lead (Consultant)",
    description: "Consulted this emerging FinTech startup on data strategy and architecture initiatives, establishing foundations for scalable analytics",
    achievements: [
        "Built an AWS-based data infrastructure with Iceberg for modern lakehouse architecture and self-service analytics",
        "Advised on data strategy and roadmap for growth optimization, feature adoption & customer intelligence",
    ],
    technologies: ["AWS", "FiveTran", "Metabase", "SQL", "Mixpanel"],
  },


  {
    id: "company-7",
    company: "Zalando",
    period: "2022 - 2023",
    location: "Berlin, Germany",
    title: "Staff ML Engineer",
    description: "Led the development of data platforms and ML infrastructure, resulting in a 40% improvement in model deployment time. Managed a team of engineers focused on data quality and pipeline reliability.",
    achievements: [
      "Conducted A/B testing for marketing campaigns",
      "Supported product development with market analysis",
      "Built scalable ETL processes handling 2TB+ daily",
    ],
    technologies: ["Python", "Airflow", "Spark", "DBT", "AWS", "Kubernetes", "Amplitude", "Tableau"],
  },
  {
    id: "company-6",
    company: "Temedica",
    period: "2020 - 2022",
    location: "Munich, Germany",
    title: "Data Platform Lead",
    description: "Oversaw data platform development and optimization initiatives. Coordinated cross-functional teams to deliver data solutions for critical business units.",
    achievements: [
      "Built NLP pipeline for customer feedback analysis",
      "Established data governance framework",
      "Designed executive KPI dashboard",
    ],
    technologies: ["Python", "TensorFlow", "SQL", "Tableau", "R"],
  },
  {
    id: "company-5",
    company: "Data Talks Club",
    period: "2020 - 2022",
    location: "Germany",
    title: "Co-Instructor & Speaker",
    description: "Analyzed large datasets to extract actionable insights. Created dashboards and reports for executive decision-making.",
    achievements: [
      "Mentored junior engineers",
      "Improved data accuracy by 35%",
      "Reduced infrastructure costs by 25%",
    ],
    technologies: ["Excel", "Basic SQL", "Google Analytics"],
  },
  {
    id: "company-4",
    company: "Freeletics",
    period: "2018 - 2020",
    location: "Munich, Germany",
    title: "Data & Analytics Engineer",
    description: "Developed predictive models and analytics solutions for business intelligence. Collaborated with product teams to implement data-driven features.",
    achievements: [
      "Spearheaded migration to cloud architecture",
      "Implemented real-time data processing architecture",
      "Created recommendation engine increasing user engagement by 15%",
    ],
    technologies: ["Python", "Scala", "Databricks", "Azure", "Kafka"],
  },
  {
    id: "company-3",
    company: "LexisNexis Risk Solutions",
    period: "2015 - 2016",
    location: "Mumbai, India",
    title: "Senior Engineer - Data Products",
    description: "Performed data cleaning, transformation, and analysis to support business objectives. Collaborated with stakeholders to understand reporting needs.",
    achievements: [
      "Maintained customer database",
      "Developed ETL scripts for data integration",
      "Identified $1.2M in cost-saving opportunities",
    ],
    technologies: ["SQL", "Excel", "Tableau", "Python basics"],
  },
  {
    id: "company-2",
    company: "JP Morgan Chase Services",
    period: "2013 - 2015",
    location: "Mumbai, India",
    title: "Business Intelligence Developer",
    description: "Analyzed business processes and requirements. Identified optimization opportunities and translated them into actionable recommendations.",
    achievements: [
      "Created weekly performance reports",
      "Supported marketing analytics initiatives",
      "Streamlined reporting processes",
    ],
    technologies: ["SQL", "Python", "Excel", "Power BI", "Looker"],
  },
  {
    id: "company-1",
    company: "Here Technologies",
    period: "2009 - 2013",
    location: "Mumbai, India",
    title: "Data Analyst",
    description: "Assisted with data collection and basic analysis. Supported reporting functions and helped maintain data integrity.",
    achievements: [
      "Reduced process inefficiencies by 20%",
      "Implemented tracking system for KPIs",
      "Automated reporting systems saving 20 hours weekly",
    ],
    technologies: ["Excel", "SQL", "JIRA", "Confluence"],
  }
];
---

<MainLayout
  title="Professional Experience | Sejal Vaidya"
  bannerTitle="Professional Journey"
  bannerDescription="14 Years of Data & Analytics Experience"
  showBanner={false}
>
  <!-- Fixed header section -->
  <div class="fixed-header">
    <div class="inner">
      <header class="major">
        <h1>Professional</h1>
      </header>
      <p>With over 14 years of experience in data and analytics, I've worked across multiple domains and technologies
      to deliver impactful solutions.</p>
      <div class="current-position-button">
        <a href="#timeline-start" id="jump-to-current" class="button next scrolly"></a>
      </div>
    </div>
  </div>

  <!-- Main content area with fixed height and scrollable timeline -->
  <div id="timeline-start" class="scrollable-content-wrapper">
    <!-- Left side will be the scrollable timeline -->
    <div class="timeline-scroll-container">
      <div class="timeline-line"></div>
      {careerHistory.map((job, index) => (
        <section id={job.id} class="career-section">
          <!-- Left side (company info) -->
          <div class="section-left">
            <div class="company-info">
              <h2 class="company-name">{job.company}</h2>
              <p class="company-period">{job.period}</p>
              <p class="company-period">{job.location}</p>
              <h3 class="job-title">{job.title}</h3>
            </div>

            <!-- Navigation button at the bottom of each section -->
            {index < careerHistory.length - 1 && (
              <a href="javascript:void(0)" data-target={`#${careerHistory[index + 1].id}`} class="more scrolly next-section timeline-nav">
                <span class="next-section-arrow"></span>
              </a>
            )}

            {index === careerHistory.length - 1 && (
              <a href="javascript:void(0)" data-target="#skills" class="more scrolly next-section timeline-nav contact-nav">
                <span class="next-section-arrow"></span>
              </a>
            )}
          </div>
          <div class="timeline-bullet"></div>

          <!-- Right side (job details) -->
          <div class="section-right">
            <div class="job-details">
              <div class="job-description">
                <p>{job.description}</p>
                <h4>Key Achievements</h4>
                <ul class="achievements">
                  {job.achievements.map((achievement) => (
                    <li>{achievement}</li>
                  ))}
                </ul>

                <div class="technologies">
                  <h4>Technologies</h4>
                  <div class="tech-tags">
                    {job.technologies.map((tech) => (
                      <span class="tech-tag">{tech}</span>
                    ))}
                  </div>
                </div>

              </div>
            </div>
          </div>

        </section>
      ))}
    </div>

    <!-- Right side static content panel -->
    <div class="static-info-panel">
      <div class="static-content">
        <h2>Highlights</h2>
        <p>My superpower?</p>
        <p>Currently working with teams to:</p>
        <p>My approach combines:</p>
        <p>Past wins:</p>
        <p>Passionate about:</p>
      </div>
    </div>
  </div>

  <!-- Skills and Competencies Section -->
<section id="skills" class="skills-section">
  <div class="inner">
    <header class="major">
      <h2>Skills & Competencies</h2>
    </header>

    <div class="skills-container">
      <div class="skill-category">
        <h3>Product & Data Analytics</h3>
        <div class="tech-tags">
          <span class="tech-tag">FiveTran</span>
          <span class="tech-tag">DBT</span>
          <span class="tech-tag">Snowflake</span>
          <span class="tech-tag">BigQuery</span>
          <span class="tech-tag">Looker</span>
          <span class="tech-tag">Metabase</span>
          <span class="tech-tag">PostHog</span>
          <span class="tech-tag">Mixpanel</span>
          <span class="tech-tag">SQL</span>
        </div>
      </div>

      <div class="skill-category">
        <h3>Software & Data Engineering</h3>
        <div class="tech-tags">
          <span class="tech-tag">AWS</span>
          <span class="tech-tag">Airflow</span>
          <span class="tech-tag">Spark</span>
          <span class="tech-tag">FastAPI</span>
          <span class="tech-tag">GCP</span>
          <span class="tech-tag">Grafana</span>
          <span class="tech-tag">Prometheus</span>
          <span class="tech-tag">Git</span>
          <span class="tech-tag">Terraform</span>
          <span class="tech-tag">Docker</span>
          <span class="tech-tag">Kubernetes</span>
        </div>
      </div>

      <div class="skill-category">
        <h3>Data Science & Machine Learning</h3>
        <div class="tech-tags">
          <span class="tech-tag">Python</span>
          <span class="tech-tag">Databricks</span>
          <span class="tech-tag">Sagemaker</span>
          <span class="tech-tag">MLflow</span>
          <span class="tech-tag">DVC</span>
          <span class="tech-tag">Dask</span>
          <span class="tech-tag">Tableau</span>
          <span class="tech-tag">scikit-learn</span>
          <span class="tech-tag">Matplotlib</span>
        </div>
      </div>

      <div class="skill-category">
        <h3>Strategy & Leadership</h3>
        <div class="tech-tags">
          <span class="tech-tag">Data Governance</span>
          <span class="tech-tag">Agile</span>
          <span class="tech-tag">Sprint</span>
          <span class="tech-tag">Kanban</span>
          <span class="tech-tag">Product Roadmapping</span>
          <span class="tech-tag">Stakeholder Management</span>
        </div>
      </div>
    </div>
  </div>
</section>
</MainLayout>

<style>
  /* Reset some default styles */
  body {
    margin: 0;
    padding: 0;
    overflow-x: hidden;
  }

  /* Remove padding from main */
  :global(#main) {
    padding: 0 !important;
    margin: 0 !important;
  }

  .fixed-header {
    width: 100%;
    background-color: #242943;
    color: white;
    padding: 0.5rem 0;
    z-index: 10;
  }

  .fixed-header .inner {
    width: 90%;
    max-width: 1200px;
    margin: 0 auto;
    text-align: center;
  }

  /* Full-page timeline layout */
  .professional-timeline {
    width: 100%;
    min-height: 100vh;
    position: relative;
  }

  .scrollable-content-wrapper {
    display: flex;
    width: 100%;
    height: calc(100vh - 60px); /* Adjusted to be taller */
    position: relative;
    overflow: hidden; /* Hide any overflow */
    scroll-margin-top: 125px; /* For the anchor navigation */
    min-height: 600px;
  }

  .static-info-panel {
    width: 35%; /* Slightly wider */
    height: 100%;
    background-color: #242943;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    position: sticky;
    top: 0;
    right: 0;
  }

  .static-info-panel::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-size: cover;
    background-position: center;
    opacity: 0.15;
    z-index: 1;
  }

  .static-content {
    position: relative;
    z-index: 2;
    padding: 2rem;
    text-align: center;
  }

  .timeline-scroll-container {
    width: 65%; /* Adjusted to fill the space */
    height: 100%;
    overflow-y: auto; /* This enables the vertical scrolling */
    position: relative;
    scroll-behavior: smooth; /* For smooth scrolling */
  }

  /* Vertical timeline line - Paradigm Shift style */
  .timeline-line {
    position: absolute;
    left: 32%;
    top: 0;
    bottom: 0;
    width: 3px;
    height: 875%; /* Full height of the scrollable container */
    background-color: rgba(255, 255, 255, 0.3);
    z-index: 5;
    transform: translateX(-50%);
  }

  /* Timeline bullet points */
  .timeline-bullet {
    position: absolute;
    left: 32%;
    top: 35%;
    transform: translateX(-50%);
    width: 20px;
    height: 20px;
    background-color: #6fc3df;
    border-radius: 50%;
    z-index: 10;
    box-shadow: 0 0 0 4px #242943, 0 0 0 8px rgba(155, 241, 255, 0.3);
  }

  /* Career section styling */
  .career-section {
    display: flex;
    min-height: 100vh; /* This ensures each section takes up full height */
    position: relative;
    width: 100%;
  }

  /* Left side (company info) - consistent styling */
  .section-left {
    width: 37%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: white;
    position: relative;
    overflow: hidden;
    background-color: #87c5a4; /* Green */
  }

  /* Background image with overlay */
  .section-left::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('/assets/images/night-skyline.jpg');
    background-size: cover;
    background-position: center;
    background-attachment: fixed; /* Creates a parallax effect */
    opacity: 0.15; /* Subtle image visibility */
    z-index: 1;
  }

  .company-info {
    position: relative;
    z-index: 2;
    text-align: center;
    padding: 2rem;
    max-width: 80%;
    margin-left: 1rem; /* Push content to the right */
    margin-right: 3rem; /* Add space to accommodate bullet point */
  }

  .company-name {
    font-size: 2rem;
    margin: 0 0 0.5rem 0;
    line-height: 1.1;
    position: relative;
  }

  .company-period {
    font-size: 1.2rem;
    opacity: 0.8;
    margin: 0 0 1.5rem 0;
    font-style: italic;
  }

  .job-title {
    font-size: 1.6rem;
    margin: 0;
    padding-top: 1rem;
    border-top: 2px solid rgba(255, 255, 255, 0.3);
    color: #242943;
  }

  /* Right side (job details) */
  .section-right {
    width: 63%; /* Adjusted to use more space */
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 3rem 4rem;
    background-color: #ffffff;
  }

  .job-details {
    max-width: 90%;
    margin: 0 auto;
  }

  .job-description {
    font-size: 1.1rem;
    line-height: 1.6;
    color: #242943;
  }

  .job-description h4 {
    color: #242943;
    font-size: 1.3rem;
    margin-top: 2rem;
    margin-bottom: 1rem;
    position: relative;
    padding-bottom: 0.5rem;
  }

  .job-description h4::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 50px;
    height: 2px;
    background-color: #6fc3df;
  }

  .achievements {
    margin: 1.5rem 0;
  }

  .achievements li {
    margin-bottom: 0.8rem;
    position: relative;
    padding-left: 1.5rem;
  }

  .achievements li::before {
    content: "";
    position: absolute;
    left: 0;
    top: 0.5rem;
    width: 8px;
    height: 8px;
    background-color: #6fc3df;
    border-radius: 50%;
  }

  .tech-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-top: 1rem;
  }

  .tech-tag {
    display: inline-block;
    background-color: rgba(155, 241, 255, 0.2);
    color: #242943;
    padding: 0.3rem 0.8rem;
    border-radius: 2rem;
    font-size: 0.9rem;
    font-weight: 600;
    border: 1px solid #6fc3df;
  }

  /* Next section button - improved visibility and positioning */
  .next-section {
    position: absolute;
    bottom: 8rem;
    left: 50%;
    transform: translateX(-50%);
    width: 3rem;
    height: 3rem;
    background-color: rgba(111, 195, 223, 0.3);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    z-index: 3;
    border: 2px solid rgba(255, 255, 255, 0.5);
  }

  .next-section:hover {
    background-color: rgba(111, 195, 223, 0.8);
    transform: translateX(-50%) scale(1.1);
  }

  .next-section-arrow {
    color: white;
    font-size: 1.5rem;
    font-weight: bold;
  }

  /* Active section styling */
  .career-section.active .company-info {
    animation: fadeInLeft 0.8s ease-out forwards;
  }

  .career-section.active .job-details {
    animation: fadeInRight 0.8s ease-out forwards;
  }

  /* Button in the header */
  .current-position-button {
      text-align: center;
      margin: 2rem 0;
  }

  @keyframes fadeInLeft {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes fadeInRight {
    from {
      opacity: 0;
      transform: translateX(20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  /* Responsive adjustments */
  @media screen and (max-width: 980px) {
    .career-section {
      flex-direction: column;
    }

    .section-left,
    .section-right {
      width: 100%;
    }

    .section-left {
      min-height: 30vh;
    }

    .section-right {
      min-height: 70vh;
      padding: 3rem 2rem;
    }

    .company-info,
    .job-details {
      max-width: 90%;
    }

    .timeline-line {
      display: none;
    }

    .timeline-bullet {
      left: 50%;
      margin-left: 0;
      transform: translate(-50%, -50%);
    }

    .scrollable-content-wrapper {
      flex-direction: column;
      height: calc(100vh - 200px); /* Increase height to fill more space */
      min-height: calc(100vh - 150px);
    }

    .timeline-scroll-container,
    .static-info-panel {
      width: 100%;
    }

    .timeline-scroll-container {
      height: 70vh;
      order: 2;
    }

    .static-info-panel {
      height: 30vh;
      order: 1;
    }
  }

  @media screen and (max-width: 736px) {
    .section-left,
    .section-right {
      padding: 3rem 1.5rem;
    }

    .company-name {
      font-size: 1.8rem;
    }

    .job-title {
      font-size: 1.3rem;
    }

    .company-info,
    .job-details {
      max-width: 100%;
    }

    .next-section {
      bottom: 2rem;
    }
  }

  .skills-section {
    padding: 1rem 0;
    background-color: #242943;
  }

  .skills-section .inner {
    width: 90%;
    max-width: 1200px;
    margin: 0 auto;
    text-align: center;
  }

  .skills-container {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem;
    margin-top: 1rem;
  }

  .skill-category {
    text-align: left;
    background-color: white;
    padding: 2rem;
    border-radius: 5px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }

  .skill-category h3 {
    color: #242943;
    margin-bottom: 1rem;
    font-size: 1rem;
    position: relative;
    padding-bottom: 0.5rem;
  }

  .skill-category h3::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 50px;
    height: 2px;
    background-color: #6fc3df;
  }

  .tech-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.8rem;
  }

  .tech-tag {
    display: inline-block;
    background-color: rgba(155, 241, 255, 0.2);
    color: #242943;
    padding: 0.1rem 0.5rem;
    border-radius: 2rem;
    font-size: 0.9rem;
    font-weight: 600;
    border: 1px solid #6fc3df;
  }

  /* Responsive adjustments */
  @media screen and (max-width: 980px) {
    .skills-container {
      grid-template-columns: 1fr;
    }
  }

  @media screen and (max-width: 736px) {
    .skills-section {
      padding: 4rem 0;
    }

    .skill-category {
      padding: 1.5rem;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
  // Define scrollContainer at the top level so all functions can access it
  const scrollContainer = document.querySelector('.timeline-scroll-container');

  // Handle all timeline navigation clicks
  document.querySelectorAll('.next-section.timeline-nav').forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();

      const targetId = this.getAttribute('data-target');

      // Check if this is the contact navigation button
      if (this.classList.contains('contact-nav')) {
        // Scroll the window to the contact section
        const contactSection = document.querySelector(targetId);
        if (contactSection) {
          window.scrollTo({
            top: contactSection.offsetTop,
            behavior: 'smooth'
          });
        }
      } else {
        // Handle regular timeline navigation
        const targetElement = document.querySelector(targetId);
        if (targetElement) {
          // Calculate the scroll position within the timeline container
          const scrollPosition = targetId === '#timeline-start' ? 0 : targetElement.offsetTop;

          // Explicitly scroll the timeline container
          scrollContainer.scrollTo({
            top: scrollPosition,
            behavior: 'smooth'
          });
        }
      }
    });
  });

  // Handle jump to current button separately
  document.getElementById('jump-to-current').addEventListener('click', function(e) {
    e.preventDefault();
    e.stopPropagation();

    // Scroll to the top of the timeline container
    scrollContainer.scrollTo({
      top: 0,
      behavior: 'smooth'
    });
  });

  // Add section reveal animations when scrolling
  const sections = document.querySelectorAll('.career-section');

  // Create an IntersectionObserver to detect when sections are visible
  const observerOptions = {
    root: scrollContainer,
    rootMargin: '0px',
    threshold: 0.1
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('active');
      }
    });
  }, observerOptions);

  // Observe each career section
  sections.forEach(section => {
    observer.observe(section);
  });
});
</script>